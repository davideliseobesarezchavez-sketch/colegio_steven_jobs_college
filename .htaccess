# ======================================================
# üöÄ SISTEMA ESCOLAR - URLs limpias y seguras
# ======================================================

RewriteEngine On
RewriteBase /colegio_steven_jobs_college/

# ================================
# üîê Redirigir ra√≠z al login
# ================================
RewriteCond %{REQUEST_URI} ^/colegio_steven_jobs_college/?$ [NC]
RewriteRule ^$ login [L,R=302]

# =======================================================
# üß© Eliminar extensi√≥n .php de todas las rutas
# (Ejemplo: /login ‚Üí login.php)
# =======================================================
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+?)/?$ $1.php [L,QSA]

# =======================================================
# ‚ú® Rutas limpias para /index/
# (Ejemplo: /index_maestro ‚Üí /index/index_maestro.php)
# =======================================================
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^index_(maestro|tutor|secretaria|admin)/?$ index/index_$1.php [L,QSA]

# =======================================================
# ‚ú® Alternativa corta: /maestro ‚Üí /index/index_maestro.php
# =======================================================
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(maestro|tutor|secretaria|admin)/?$ index/index_$1.php [L,QSA]

# =======================================================
# üì¶ Rutas limpias para /includes/
# (Ejemplo: /actualizar_tarea ‚Üí /includes/actualizar_tarea.php)
# =======================================================
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(contacto|correo|actualizar_tarea|notas|mensajes)/?$ includes/$1.php [L,QSA]

# =======================================================
# üõ°Ô∏è Proteger carpetas internas
# =======================================================
RewriteRule ^(includes|PHPMailer-master|vendor|config)/ - [F,L]

# =======================================================
# üö´ Bloquear archivos sensibles
# =======================================================
<FilesMatch "(^\.|config\.php|conexion\.php)">
  Require all denied
</FilesMatch>

# =======================================================
# üåê Evitar listado de directorios
# =======================================================
Options -Indexes

# =======================================================
# ‚úçÔ∏è Forzar codificaci√≥n UTF-8
# =======================================================
AddDefaultCharset utf-8
